<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>What is Goal-Oriented Test-Driven Development?</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="paragraph">
<p>This tutorial explains how to test Jason agents in AgentSpeak, using a novel (as of 2022)
goal-oriented test feature that enables an agent-oriented perspective on automated software testing
and test-driven development. The feature allows writing test programs for Jason agents in
AgentSpeak, and aligns software testing and agent-oriented programming abstractions. This
consolidation of perspectives is called <em>Goal-Oriented Test-Driven Development</em> (GOTDD).</p>
</div>
<div class="paragraph">
<p>A presentation of this tutorial is also available <a href="https://www.slideshare.net/clebercbr/test-driven-development-for-agents-tutorial">here</a>.</p>
</div>
<div class="sect1">
<h2 id="_what_is_goal_oriented_test_driven_development">What is Goal-Oriented Test-Driven Development?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In modern software development, testing plays a key role, as it helps ensure the software works as
expected. Ideally, developers use <em>Test-Driven Development</em> (TDD) approaches, in which a large
portion of the tests is written during or even ahead of the implementation of the actual program
code. The assumption is that specifying the exact desired behavior of a software component before
or alongside the implementation facilitates a more rigorous assessment of the component and ensures
testing is not cut short because of time shortage caused by mis-estimations. Generally, it is
considered good practice to focus automated testing efforts on <em>unit tests</em> of small components that
can and hence <em>should</em> be tested in a rigorous manner and to cover the overall system (or system of
systems) with less dense <em>integration tests</em> and <em>End-to-End</em> (E2E) tests; the latter cannot cover
all possible input and environment configurations because of the explosion in combinatorial options
(even for fairly small systems) but they can potentially catch unexpected behavior of components
that seemingly work correctly from a lower-level perspective.</p>
</div>
<div class="paragraph">
<p>From an agent-oriented view, unit tests cover behavior that is <em>agent-agnostic</em>, <em>i.e.</em> which can be
tested as if it was a function/method call&#8201;&#8212;&#8201;for example, given the internal state the agent&#8201;&#8212;&#8201;and which is disconnected from the state of the environment and the other agents that (inter)act
in it. While unit tests for agents are conceptually not different from traditional unit tests,
Jason&#8217;s GOTDD feature is novel even on this level because it provides first-class abstractions for
tests in an agent-oriented programming language. Still, more interestingly, Jason allows for the
specification of tests that check whether an agent, given an initial environment state (and
potentially given other agents), will eventually (or given a specific time constraint) achieve a
particular <em>goal</em>; <em>i.e.</em>, goals are promoted to first-class abstractions for test-driven
development, which allows for integration tests for single agents (agent-environment integration)
and multi agents (agent-environment-agent, whereby the environment may or may not contain explicitly
modelled artifacts) integration. The figure below shows the <em>test pyramid</em> from a traditional
software engineering perspective and contrasts it with an agent-oriented test pyramid.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figures/Agent-Oriented_TDD.png" alt="Agent Oriented TDD"></span></p>
</div>
<div class="paragraph">
<p>The tutorial below provides examples of unit testing, single agent testing, and multi-agent testing
with Jason/JaCaMo. Note that E2E tests are not covered, because these are typically implemented in a
different technology ecosystem (for example: <em>Selenium</em> for end-to-end user interface testing).
However, we consider E2E MAS testing an interesting open challenge that needs more exploration.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_under_the_hood">Under the Hood</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Under the hood, Jason&#8217;s GOTDD feature allows for the instantiation of one main agent per test file,
as well as for the instantiation of several <em>mock agents</em>; in addition to mock agents, the main
(to-be-tested) agent may interact with other agents that have been implemented in a traditional
manner. The main agent is monitored by Jason&#8217;s tester agent with regards to the main agent&#8217;s ability
to achieve certain goals, or the agent&#8217;s internal state (for example: belief adoption). Whenever
a corresponding assertion fires, the tester agent reports the result (pass or fail).</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figures/Agents-TDD-overview.png" alt="Agents TDD overview"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_test_levels_in_jasonjacamo">Test Levels in Jason/JaCaMo</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now, let us provide examples how tests on the three lower levels (<em>unit</em>, <em>single agent</em>, <em>multi
agent</em>, assuming that end-to-end tests need to be supported by additional tooling) work.
For explanatory purposes, we build projects inspired by an example provided in
<a href="https://mitpress.mit.edu/9780262044578/">JaCaMo Book</a>
of an MAS to control the temperature of a room.</p>
</div>
<div class="paragraph">
<p>We start discussing current testing approaches that we can use for testing a JaCaMo project. After
that, we provide an example of a unit test using a JaCaMo test library, then we face slightly more
challenging situations, testing agent&#8217;s plans, mocking artifacts and testing agents' interactions.
Each example builds upon its predecessor.</p>
</div>
<div class="sect2">
<h3 id="_project_setup">Project Setup</h3>
<div class="paragraph">
<p>Let us set up our JaCaMo project and configure it for GOTDD.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, make sure the <code>Java 15</code> or superior is set.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ java --version</code></pre>
</div>
</div>
</li>
<li>
<p>Then, we download a JaCaMo facility for creating projects and execute it to create our
<code>tdd_tutorial</code> project.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ wget http://jacamo.sourceforge.net/nps/npss.zip
$ unzip npss.zip
$ ./gradlew --console=plain</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that this creates a sample project with the following source directory structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>/
- src
    - agt
    - env
    - int
    - org
    - test</code></pre>
</div>
</div>
</li>
<li>
<p>We can run the default project just to make sure everything is working fine. An MAS console
should open showing our <code>sample_agent</code> printing out <code>hello world</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>tdd_tutorial$ ./gradlew run</code></pre>
</div>
</div>
</li>
<li>
<p>Also, we can already execute an example test:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>tdd_tutorial$ ./gradlew test</code></pre>
</div>
</div>
</li>
<li>
<p>Now, we adapt the sample project to build an agent that controls the temperature of the
environment. At <code>src/agt</code>, we rename the <code>sample_agent.asl</code> file to <code>room_agent.asl</code>, remove
the file <code>src/test/agt/test_sample.asl</code> and fix the <code>tdd_tutorial.jcm</code> for this other agent
filename, as below:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>mas tdd_tutorial {

    agent room_agent

}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_unit_testing_in_jason_jacamo">Unit Testing in Jason (JaCaMo)</h3>
<div class="paragraph">
<p>Let us start by implementing a unit test that tests a simple inference rule. In the file
<code>room_agent.asl</code> we replace the default content by the following rule:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>now_is_warmer_than(T) :- temperature(C) &amp; C &gt; T.</code></pre>
</div>
</div>
<div class="paragraph">
<p>As we can see, the rule checks whether the current 'temperature' is greater than a predefined value.
A possible method for determining whether this rule is working properly is to begin developing a
plan that calls this rule in order to test it in a variety of situations.
Debugging console messages and other tools such as the
<a href="http://127.0.0.1:3272/">Agents' Inspector</a> are commonly used.</p>
</div>
<div class="paragraph">
<p>Below, we demonstrate how this rule can be tested. Because this rule merely draws inferences and
does not act in the environment, we consider this scenario a <strong>unit testing</strong> scenario rather than a
single agent testing scenario.</p>
</div>
<div class="paragraph">
<p>Now, in the <code>room_agent.asl</code> file, we set a temperature value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>temperature(15).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, we try out our inference rule:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>!auto_test.

+!auto_test:
    temperature(C)
    &lt;-
    .print("Current temperature: ",temperature(C));

    .eval(X1, now_is_warmer_than(20));
    .print(now_is_warmer_than(20)," = ",X1);

    .eval(X2, now_is_warmer_than(10));
    .print(now_is_warmer_than(10)," = ",X2);

    .eval(X3, now_is_warmer_than(15));
    .print(now_is_warmer_than(15)," = ",X3).</code></pre>
</div>
</div>
<div class="paragraph">
<p>This kind of test is performed using the usual command to run a JaCaMo MAS project (<code>./gradlew run</code>).
Such <strong>naive</strong> inline tests are frequently used to facilitate debugging, but have obvious
shortcomings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>They do not allow for a clear separation between test and production code.</p>
</li>
<li>
<p>They do not clearly describe desired behavior.</p>
</li>
<li>
<p>They make it hard to automate tests.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To test the file properly, we create the file <code>test_room_agent.asl</code> at <code>src/test/agt</code>.</p>
</div>
<div class="paragraph">
<p>At the beginning of <code>test_room_agent.asl</code> file, we import the Jason tester agent, as well
as the file that we want to test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{ include("tester_agent.asl") }
{ include("room_agent.asl") }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, we add a test goal, using the <code>@[test]</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>@[test]
+!test_now_is_warmer_than
    &lt;-
    -+temperature(15);
    !assert_false(now_is_warmer_than(20));
    !assert_true(now_is_warmer_than(10));
    !assert_false(now_is_warmer_than(15)).</code></pre>
</div>
</div>
<div class="paragraph">
<p>As we can see, the test specifies the truth table of the inference rule, given the following three
scenarios:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The provided value temperature is higher than the current temperature.</p>
</li>
<li>
<p>The provided value is lower than the current temperature.</p>
</li>
<li>
<p>The provided value is equal to the current temperature.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To use this testing facility, we merely need to execute the test command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ ./gradlew test --info</code></pre>
</div>
</div>
<div class="paragraph">
<p>As seen, the plan in line plan <code>auto_test</code> in the <code>room_agent.asl</code> file is no longer required.</p>
</div>
<div class="paragraph">
<p>The complete project is available <a href="./1_room_agent/">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_single_agent_testing_in_jason_jacamo">Single Agent Testing in Jason (JaCaMo)</h3>
<div class="paragraph">
<p>In the following single agent testing example, we test if the agent cools a room when the
temperature in the room is higher than some specific threshold, <em>i.e.</em>, the agent <strong>reacts</strong> on
temperature changes, whereas its actions in turn <strong>affect</strong> the temperature in the room.</p>
</div>
<div class="paragraph">
<p>We keep the rule <code>now_is_warmer_than/1</code> of our <code>room_agent</code> and now, we implement the cooler
functionality that starts the cooler if the temperature is above the threshold:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>+!temperature(T):
    now_is_warmer_than(T) &amp;
    temperature(C)
    &lt;-
    if (not state("cooling")) {
        /**
         * To control the room temperature it could
         * activate a physical cooler here
         */
        +state("cooling");
        .log(warning,C," is too hot -&gt; cooling until ",T);
    }
    !temperature(T).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Analogously, the cooler should stop cooling if the temperature is below the threshold:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>+!temperature(T):
    state("cooling")
    &lt;-
    .log(warning,"Temperature achieved: ",T);

    /**
     * Deactivating the cooler
     */
    -state("cooling");

    !temperature(T).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let us highlight that our room_agent example is simplistic from a real-world perspective,
as we ignore the control-theoretical nature of the problem.</p>
</div>
<div class="paragraph">
<p>Finally, we ensure that the room_agent is continuously evaluating and adjusting its behavior,
using the following loop:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>+!temperature(T)
    &lt;-
    !temperature(T).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that in this example, we specify the initial beliefs of the agent in the
<a href="./2_room_agent_cooling/tdd_tutorial.jcm">jcm file</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>mas tdd_tutorial {

    agent room_agent {
        goals: temperature(10)
        beliefs: temperature(15)
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also, we want to test whether the agent <strong>acts</strong> correctly.
So, we add to the file <code>test_room_agent.asl</code> at <code>src/test/agt</code> a new test.
For this, we set at target temperature of 10 degrees (given a current temperature of 15 degrees) and
regularly check in a loop whether the cooler acts as expected given the current temperature and the
agents&#8217;s goal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>@[test]
+!test_cool_until_temperature_dropping
    &lt;-
    -+temperature(15); // The default current temperature is 15 degrees
    !!temperature(10); // We want to reach 10 degrees (this is running in parallel)
    .wait(50); // Give some time to the agent to react
    for ( .range(I,1,10) ) { // Let us check 10x if it is cooling correctly
        ?temperature(C);
        if (C &gt; 10) { // Greater than 10, cooler MUST be on
            !assert_true(state("cooling"));
            -+temperature(C-1); // emulate that the temperature has dropped
        } else { // Not greater than 10, cooler MUST be off
            !assert_false(state("cooling"));
        }
    }
    .drop_desire(temperature(10)).</code></pre>
</div>
</div>
<div class="paragraph">
<p>The complete project is available <a href="./2_room_agent_cooling/">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_agents_and_artifacts">Agents and Artifacts</h3>
<div class="paragraph">
<p>In this final single-agent testing example, we introduce an artifact that our agent interacts with.
First, we configure the MAS in the file <code>tdd_tutotial.jcm</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>mas tdd_tutorial {
    agent room_agent {
        goals: temperature(21)
        focus: room.hvac
    }

    workspace room {
        artifact hvac: devices.HVAC(15)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As we can see, our room agent focuses the <code>hvac</code> (air conditioning) artifact and has a particular
current temperature (15Â°C) as it provides to the agent this information.</p>
</div>
<div class="paragraph">
<p>The artifact models the air conditioning/HVAC. It has the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>init</code> (with <em>temperature</em> parameter): sets the initial temperature and sets the HVAC&#8217;s state to
<code>idle</code>.</p>
</li>
<li>
<p><code>updateTemperatureProc</code> (internal (private), with <em>step</em> parameter): this is used to simulate
changes in the room temperature. While the HVAC is not in state <code>idle</code>, change the temperature by
<code>step</code> degrees and waits for 100ms to then repeat the loop.</p>
</li>
<li>
<p><code>startCooling</code>: sets the state to <code>cooling</code> and calls <code>updateTemperatureProc</code> with <em>step</em> set to
<code>-0.5</code>.</p>
</li>
<li>
<p><code>stopAirConditioner</code>: sets the state of the HVAC to <code>idle</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We will create the file <code>src/env/devices/HVAC.java</code> to implement these methods.
The source code of the artifact looks as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>package devices;

import cartago.*;

@ARTIFACT_INFO(outports = { @OUTPORT(name = "out-1") })

public class HVAC extends Artifact {

    void init(double initialTemperature){
        defineObsProperty("state","idle");
        defineObsProperty("temperature",initialTemperature);
        log("Temperature: "+getObsProperty("temperature").doubleValue());
    }

    @OPERATION void startCooling(){
        log("startCooling");
        getObsProperty("state").updateValue("cooling");
        this.execInternalOp("updateTemperatureProc",-0.5);
    }

    @OPERATION void stopAirConditioner(){
        log("stopAirCond");
        getObsProperty("state").updateValue("idle");
    }

    @INTERNAL_OPERATION void updateTemperatureProc(double step){
        ObsProperty temp = getObsProperty("temperature");
        ObsProperty state = getObsProperty("state");
        while (!state.stringValue().equals("idle")){
            temp.updateValue(temp.doubleValue() + step);
            log("Temperature: "+temp.doubleValue());
            this.await_time(100);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, we integrate the artifact with our agent, replacing the hard-coded state/emulation ("cooling")
with actions upon the HVAC artifact. Note that the code below, is importing <strong>common-cartago.asl</strong>,
as it is necessary when the agent interacts with CArtAgO artifacts.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>+!temperature(T):
	now_is_warmer_than(T) &amp;
	temperature(C)
	&lt;-
	if (not state("cooling")) {
	    startCooling;
		.log(warning,C," is too hot -&gt; cooling until ",T);
    }
	!temperature(T);
.

+!temperature(T):
	state("cooling")
	&lt;-
	stopAirConditioner;
	.log(warning,"Temperature achieved: ",T);
    !temperature(T);
.

+!temperature(T)
    &lt;-
    !temperature(T);
.

{ include("$jacamoJar/templates/common-cartago.asl") }
{ include("$jacamoJar/templates/common-moise.asl") }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The artifact <strong>device/HVAC</strong> is not being instantiated, which means that the external calls
<strong>startCooling</strong> and <strong>stopAirConditioner</strong> would break the test if they are executed. At this time,
the main concern regards to the room agent functionalities, not the functionalities of other
entities that it interacts with. To ensure this separation of concerns, the <strong>mock</strong> concept can be
used. Here, the <strong>mock</strong> concept is used on the agent under test entity, i.e., we are replacing some
agent plans that call external actions by plans that are mocking some behaviors. Notice that the
order is very important since each plan is added on the beginning of the plans library of the agent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>@[test]
+!test_cool_until_temperature_dropping
    &lt;-
    .add_plan({
    +!temperature(T):
        state("cooling")
        &lt;-
        .log(warning,"Temperature achieved: ",T);
        -state("cooling");
        !temperature(T);
    }, self, begin);
    .add_plan({
    +!temperature(T):
        now_is_warmer_than(T) &amp;
        temperature(C)
        &lt;-
        if (not state("cooling")) {
            +state("cooling");
            .log(warning,C," is too hot -&gt; cooling until ",T);
        }
        !temperature(T);
    }, self, begin);

    -+temperature(15);
    !!temperature(10);
    .wait(50);
    for ( .range(I,1,10) ) {
        ?temperature(C);
        if (C &gt; 10) {
            !assert_true(state("cooling"));
            -+temperature(C-1);
        } else {
            !assert_false(state("cooling"));
        }
    }
    .drop_desire(temperature(10));
.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, as replacing entire plans is a dangerous technique: then, our tests are, to a great
extent, decoupled from the room agent code. However, for the sake of simplicity we will keep this
as an example. A safer way could be defining small plans that call the external actions and merely
mock these <em>interface plans</em>.</p>
</div>
<div class="paragraph">
<p>The complete project is available <a href="./3_room_agent_with_artifact/">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_multiple_agents">Multiple Agents</h3>
<div class="paragraph">
<p>Finally, let us implement and test a simple Multi-Agent System (MAS). In the MAS, we have an
additional <em>assistant agent</em> that relays user preferences to the room agent. We will create the file
<code>src/agt/assistant.asl</code> for that. Accordingly, the code for the assistant agent is very simple:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>+!send_preference:
    preferred_temperature(T) &amp;
    recipient_agent(R)
    &lt;-
    .log(warning,"Sending preference for ",T);
    .send(R,achieve,add_preference(T)).

{ include("$jacamoJar/templates/common-cartago.asl") }
{ include("$jacamoJar/templates/common-moise.asl") }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that in the <code>tdd_tutorial.jcm</code> configuration file, we then instantiate two assistant agents
representing the users <em>Cleber</em> and <em>Tim</em>, respectively:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>agent tims_assistant : assistant.asl {
        beliefs: preferred_temperature(23)
                 recipient_agent(room_agent)
        goals: send_preference
    }

agent clebers_assistant : assistant.asl {
    beliefs: preferred_temperature(25)
                recipient_agent(room_agent)
    goals: send_preference
}

workspace room {
    artifact hvac: devices.HVAC(25)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, we adjust our room agent so that it considers all preferences received by the assistant agents
to then set its goal temperature to the average of the agents' temperature preferences (of course,
this approach invites strategic manipulation by the users, but let us ignore this issue for the
sake of simplicity):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>+!add_preference(T)[source(S)]
    &lt;-
    .abolish(preference(S,_));
    +preference(S,T);
    .findall(X,preference(_,X),L);
    .drop_desire(temperature(_));
    !temperature(math.mean(L));
.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, we can test our agent. However, before we can write the actual tests, we first want to create
some mocks. Note that we have already worked with <em>mock plans</em> in the previous example.
To test if the interactions between assistants and the room agent, we create the file
<code>test_assistant.asl</code> at <code>src/test/agt</code>. In this file, we test whether the room agent aggregates the
preferences of several assistant agents correctly. This is achieved by instantiating mock agents,
this time two assistants with different temperature preferences and one mock room agent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{ include("tester_agent.asl") }
{ include("assistant.asl") }

@[test]
+!test_multiple_preferences
    &lt;-
    /*
     * Create a room_agent and two assistants. The assistants
     * ask for 23 and 25 degrees, so the final temperature should
     * be 24 degrees.
     */
    .create_agent(mock_room_agent, "mock_room_agent.asl");
    .create_agent(tims_assistant, "assistant.asl");
    .create_agent(clebers_assistant, "assistant.asl");

    .send(tims_assistant,tell,preferred_temperature(23));
    .send(tims_assistant,tell,recipient_agent(mock_room_agent));
    .send(tims_assistant,achieve,send_preference);
    .send(clebers_assistant,tell,preferred_temperature(25));
    .send(clebers_assistant,tell,recipient_agent(mock_room_agent));
    .send(clebers_assistant,achieve,send_preference);

    /*
     * Give some time to the room_agent process the information
     * and mocking a result
     */
    .wait(50);
    .send(mock_room_agent,askOne,temperature(T),temperature(T));
    !assert_equals(24,T);

    .kill_agent(mock_room_agent);
    .kill_agent(tims_assistant);
    .kill_agent(clebers_assistant).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the room agent is a mock agent: we need to replace some plans to avoid errors when
interacting with the artifact. It also must mock the plan that receives preferences and provide a
way to check whether it found the average between two specified temperature preferences.
This mock agent is a test accessory. Since it does not have testing plans (it is just a mock), we
place this file in the <code>inc</code> folder (<code>src/test/inc</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{ include("room_agent.asl") }

!add_mock_plans.

+!add_mock_plans
	&lt;-
	.add_plan({
	+!temperature(T): state("cooling")
	&lt;-
	-state("cooling");
	!temperature(T);
	}, self, begin);

	.add_plan({
	+!temperature(T): now_is_warmer_than(T) &amp; temperature(C)
	&lt;-
	if (not state("cooling")) {
		+state("cooling");
	}
	!temperature(T);
	}, self, begin);

	.add_plan({
	+!add_preference(T)[source(S)]
	&lt;-
	.abolish(preference(S,_));
	+preference(S,T);
	.findall(X,preference(_,X),L);
	/*Mock temperature with the average*/
	+temperature(math.mean(L));
	}, self, begin).</code></pre>
</div>
</div>
<div class="paragraph">
<p>As we can see, the mock plans do not make calls to the artifact and hence allow for (multi-)agent
testing without artifact instantiation.</p>
</div>
<div class="paragraph">
<p>The complete project is available <a href="./4_multi_agents/">here</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial has provided a brief overview of how to test Jason agents and JaCaMo MAS directly in
AgentSpeak, and has also, more generally, introduced the conceptual benefits goal-oriented
test-driven development provides for the development of multi-agent systems.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-04-07 17:45:11 UTC
</div>
</div>
</body>
</html>